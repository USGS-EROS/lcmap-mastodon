<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link rel="icon" href="images/cljs-logo-icon-32.png">

    <link rel="stylesheet" href="css/bootstrap.min.css"> <!-- load bootstrap via CDN -->
    <script src="js/jquery.min.js"></script> <!-- load jquery via CDN -->


    <script src="js/compiled/mastodon_min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function() {
         lcmap.mastodon.dom.disable_btn("chpsubmit");

         $("#chpsubmit").click(function() {
            lcmap.mastodon.dom.show_div("busydiv");
            lcmap.mastodon.dom.disable_btn("chpsubmit");
            lcmap.mastodon.core.ingest("ardinprogress-counter", "ardmissing-counter", "ardingested-counter", "busydiv", "arderror-counter");
          });   

          $("#frmsubmit").click(function() {
            lcmap.mastodon.dom.reset_counter_divs(["ardingested-counter", "ardmissing-counter"]);
            lcmap.mastodon.dom.show_div("busydiv");
            var ardhost = $("#ardhost").val();
            var idwhost = $("#idwshost").val();
            var tile_id = $("#tileid").val();             
            var region  = $("#region").val();
            var dev     = $("#devcheck").prop("checked");
               lcmap.mastodon.core.assess_ard(ardhost, idwhost, tile_id, region, "busydiv", "chpsubmit", "ardingested-counter", 
                                                                                                         "ardmissing-counter", 
                                                                                                         "iwdsmissing-list",
                                                                                                         "arderror-counter");
          });

      });

    </script>
    <style>
      .counter-div {padding:2px;overflow:hidden; }
      .ard-wrapper {width:33%; text-align:center; float: right;}
    </style>

  </head>
  <body>

    <div class="col-sm-6 col-sm-offset-3" style="width:600px;">

      <h1>LCMAP System Source Data Inventory Monitoring</h1>

      <!-- OUR FORM -->
      <form action="" method="POST">

        <!-- ARD -->
        <div id="ard-group" class="form-group">
          <label for="ardhost">ARD Host</label>
          <input type="text" class="form-control" id="ardhost" name="ardhost" placeholder="http://localhost:9000">
        </div>
        <!-- IDWS -->
        <div id="idws-group" class="form-group">
          <label for="idwshost">IDWS Host</label>
          <input type="text" class="form-control" id="idwshost" name="idwshost" value="http://localhost:5656">
        </div>

        <!-- Region -->
        <div id="reg-group" class="form-group">
          <label for="region">Region</label>
          <input type="text" class="form-control" id="region" name="region" placeholder="conus" size="5">
        </div>

        <!-- H & V -->
        <div id="tile-group" class="form-group">
          <label for="tileid">Tile ID</label>
          <input type="text" class="form-control" id="tileid" name="tileid" placeholder="111555">
        </div>

      </form>
      <!-- find better solution to preventing form submission -->
      <button id="frmsubmit" type="submit" class="btn btn-success">Check Tile Status <span class="fa fa-arrow-right"></span></button>
      <button id="chpsubmit" type="submit" class="btn btn-success">Ingest Missing ARD <span class="fa fa-arrow-right"></span></button>
      <div id="busy-container" style="height:65px;">
        <div id="busydiv" style="display:none;float:right;"><img src="images/Blocks.gif"></img></div>
      </div>
      <div id="counters-container" class="counter-div">
        <div id="ardmissing" class="counter-div ard-wrapper w3-container w3-pale-blue w3-leftbar w3-border-blue">
          Missing from IWDS
          <div id="ardmissing-counter" class="counter-div">0</div>
        </div>

        <div id="ardinprogress" class="counter-div ard-wrapper w3-container w3-pale-blue w3-leftbar w3-border-blue">
          In Progress
          <div id="ardinprogress-counter" class="counter-div">0</div>
        </div>


        <div id="ardingested" class="counter-div ard-wrapper w3-container w3-pale-blue w3-leftbar w3-border-blue">
          Ingested
          <div id="ardingested-counter" class="counter-div">0</div>
        </div>

        <div  style="height:48px;" class="counter-div ard-wrapper w3-container w3-pale-blue w3-leftbar w3-border-blue w3-topbar">
          <div class="counter-div"></div>

        <div id="arderror" class="counter-div ard-wrapper w3-container w3-pale-blue w3-leftbar w3-border-blue w3-topbar">
          Errored on ingest
          <div id="arderror-counter" class="counter-div">0</div>
        </div>

        <div  style="height:48px;" class="counter-div ard-wrapper w3-container w3-pale-blue w3-leftbar w3-border-blue w3-topbar">
          <div class="counter-div"></div>
        </div>
     </div>

        <div id="iwdsmissing">
          Ingested and now Missing ARD
          <div id="iwdsmissing-list"></div>
        </div>


    </div>
  </body>
</html>
